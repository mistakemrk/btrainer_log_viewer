### **ステップ2：テストカバレッジ向上のための作業計画**

`GEMINI.md`の計画に基づき、以下の手順でテストを追加していきます。

**フェーズ1: 現状分析**

1.  **既存テストの確認:**
    *   まず `test/` ディレクトリ内の既存のテストファイル (`widget_test.dart`, `models/track_data_test.dart`) の内容を読み込み、現在のテスト実装範囲を正確に把握します。
2.  **テスト対象コードの分析:**
    *   ユニットテストの対象となる以下のファイルの内容を読み込み、テストすべき具体的な関数やロジック（入力と期待される出力）を特定します。
        *   `lib/utils/nmea_parser.dart`
        *   `lib/main.dart` （特に緯度経度変換や距離計算などの純粋な計算ロジック）
        *   `lib/models/track_data.dart`

**フェーズ2: テスト実装計画**

1.  **ユニットテストの追加:**
    *   **NMEAパーサー:** `test/utils/` ディレクトリを新たに作成し、その中に `nmea_parser_test.dart` を新規作成して、チェックサム計算や各NMEAセンテンスのパース処理に関するテストを記述します。
    *   **計算ロジック:** `test/` ディレクトリ直下に `logic_test.dart` を新規作成し、`main.dart` から抽出・テスト可能と判断した計算ロジック（NMEA形式から10進数への変換、2点間の距離計算など）のテストを記述します。
    *   **データモデル:** 既存の `test/models/track_data_test.dart` に、データが空の場合の初期値を確認するテストケースを追記します。

2.  **ウィジェットテストの追加:**
    *   既存の `test/widget_test.dart` に、ファイル選択処理をモック化した上でのUI更新テストや、地図の表示/非表示切り替えボタンの動作テストを追記します。

3.  **インテグレーションテストの準備:**
    *   Flutterの慣例に従い、プロジェクトルートに `integration_test` ディレクトリを新規作成します。
    *   その中に `app_test.dart` を新規作成し、ファイル読み込みから地図とサマリーが表示されるまでの一連の操作をシミュレートするテストを記述する準備をします。

**フェーズ3: 実行と検証**

*   各テストコードの実装が完了するたびに `flutter test` を実行し、テストが成功することを確認しながら進めます。
*   すべてのテストを追加し終えたら、再度 `flutter test` と `flutter test integration_test` を実行して、リファクタリングによる既存機能への影響がないことを保証します。
